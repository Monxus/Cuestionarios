function gestionarXml(a){var b=a.responseXML;for(numPregunta=0;numPregunta<2;numPregunta++){var c=b.getElementsByTagName("title")[numPregunta].innerHTML,d=[],e=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option").length;for(i=0;i<e;i++)d[i]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option")[i].innerHTML;ponerDatosSelectHtml(c,d,numPregunta),respuestaSelect[numPregunta]=parseInt(b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer")[0].innerHTML)}for(numPregunta=2;numPregunta<4;numPregunta++){var f=b.getElementsByTagName("title")[numPregunta].innerHTML,g=[],e=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option").length;for(i=0;i<e;i++)g[i]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option")[i].innerHTML;ponerDatosMultipleHtml(f,g,numPregunta);var h=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer").length;for(respuestasMultiple[numPregunta]=[],i=0;i<h;i++)respuestasMultiple[numPregunta][i]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer")[i].innerHTML}for(numPregunta=4;numPregunta<6;numPregunta++){var j=b.getElementsByTagName("title")[numPregunta].innerHTML;ponerDatosInputHtml(j,numPregunta),respuestaText[numPregunta]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer")[0].innerHTML}for(numPregunta=6;numPregunta<8;numPregunta++){var k=b.getElementsByTagName("title")[numPregunta].innerHTML,l=[],e=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option").length;for(i=0;i<e;i++)l[i]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option")[i].innerHTML;ponerDatosRadioHtml(k,l,numPregunta),respuestaRadio[numPregunta]=parseInt(b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer")[0].innerHTML)}for(numPregunta=8;numPregunta<10;numPregunta++){var m=b.getElementsByTagName("title")[numPregunta].innerHTML,n=[],e=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option").length;for(i=0;i<e;i++)n[i]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("option")[i].innerHTML;ponerDatosCheckboxHtml(m,n,numPregunta);var h=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer").length;for(respuestasCheckbox[numPregunta]=[],i=0;i<h;i++)respuestasCheckbox[numPregunta][i]=b.getElementsByTagName("question")[numPregunta].getElementsByTagName("answer")[i].innerHTML}}function corregirSelect(){for(n=0;n<2;n++){var a=formElement.elements[n];a.selectedIndex-1==respuestaSelect[n]?(darRespuestaHtml("- Pregunta "+(n+1)+": Correcta"),nota+=1):(darRespuestaHtml("- Pregunta "+(n+1)+": Incorrecta"),0==n?(darExplicacion("Respuesta correcta: c"),darExplicacion("Si un avión explota no podrás salir de él, como mucho saldrás por las noticias.")):(darExplicacion("Respuesta correcta: c"),darExplicacion("En un incendio, las llamas siempre tienen la culpa.")))}}function corregirMultiple(){for(n=2;n<4;n++){var a=formElement.elements[n],b=[],c=!1;for(i=1;i<a.length;i++){var d=a.options[i];if(d.selected){for(b[i]=!1,j=0;j<respuestasMultiple[n].length;j++)i-1==respuestasMultiple[n][j]&&(b[i]=!0);b[i]?(nota+=1/respuestasMultiple[n].length,darRespuestaHtml("- Pregunta "+(n+1)+": Opción "+i+" Correcta")):(nota-=1/respuestasMultiple[n].length,darRespuestaHtml("- Pregunta "+(n+1)+": Opción"+i+" Incorrecta"),c=!0)}}2==n&&1==c?darExplicacion("Respuestas correcta: a, b, d"):3==n&&1==c&&darExplicacion("Respuestas correcta: a, d")}}function corregirText(){for(n=4;n<6;n++){var a=formElement.elements[n].value;a.toLowerCase()==respuestaText[n]?(darRespuestaHtml("- Pregunta "+(n+1)+": Correcta"),nota+=1):(darRespuestaHtml("- Pregunta "+(n+1)+": Incorrecta"),4==n?(darExplicacion("Respuesta correcta: tela"),darExplicacion("'Tela' digo y no la entiendes; 'tela' vuelvo a repetir")):darExplicacion("Respuesta correcta: silencio"))}}function corregirRadio(){var a=formElement;for(n=6;n<8;n++){var b;b=6==n?a.seis:a.siete,b.value==respuestaRadio[n]?(darRespuestaHtml("- Pregunta "+(n+1)+": Correcta"),nota+=1):(darRespuestaHtml("- Pregunta "+(n+1)+": Incorrecta"),4==n?darExplicacion("Respuesta correcta: c"):(darExplicacion("Respuesta correcta: d"),darExplicacion("Lo más rápido en la sabana siempre será el vehículo.")))}}function corregirCheckbox(){var a=formElement,b=[];for(n=8;n<10;n++){var c,d=!1;for(c=8==n?a.ocho:a.nueve,i=0;i<c.length;i++)if(c[i].checked){for(b[i]=!1,j=0;j<respuestasCheckbox[n].length;j++)i==respuestasCheckbox[n][j]&&(b[i]=!0);b[i]?(nota+=1/respuestasCheckbox[n].length,darRespuestaHtml("- Pregunta "+(n+1)+": Opción "+(i+1)+" Correcta")):(nota-=1/respuestasCheckbox[n].length,darRespuestaHtml("- Pregunta "+(n+1)+": Opción "+(i+1)+" Incorrecta"),d=!0)}8==n&&1==d?darExplicacion("Respuestas correcta: b, c, d, e, f"):9==n&&1==d&&darExplicacion("Respuestas correcta: a, b")}}function ponerDatosSelectHtml(a,b,c){document.getElementsByTagName("h3")[c].innerHTML=a;var d=document.getElementsByTagName("select")[c];for(i=0;i<b.length;i++){var e=document.createElement("option");e.text=b[i],e.value=i,d.options.add(e)}}function ponerDatosMultipleHtml(a,b,c){document.getElementsByTagName("h3")[c].innerHTML=a;var d=document.getElementsByTagName("select")[c];for(i=0;i<b.length;i++){var e=document.createElement("option");e.text=b[i],e.value=i,d.options.add(e)}}function ponerDatosInputHtml(a,b){document.getElementsByTagName("h3")[b].innerHTML=a}function ponerDatosRadioHtml(a,b,c){document.getElementsByTagName("h3")[c].innerHTML=a;var e,d=document.getElementsByClassName("radioDiv")[c-6];for(e=6==c?"seis":"siete",i=0;i<b.length;i++){var f=document.createElement("input"),g=document.createElement("label");g.innerHTML=b[i],f.type="radio",f.name=e,f.value=i,d.appendChild(f),d.appendChild(g),d.appendChild(document.createElement("br"))}}function ponerDatosCheckboxHtml(a,b,c){var d=document.getElementsByClassName("checkboxDiv")[c-8];document.getElementsByTagName("h3")[c].innerHTML=a;var e;for(e=8==c?"ocho":"nueve",i=0;i<b.length;i++){var f=document.createElement("input"),g=document.createElement("label");g.innerHTML=b[i],g.setAttribute("for",e+"_"+i),f.type="checkbox",f.name=e,f.id=e+"_"+i,d.appendChild(f),d.appendChild(g),d.appendChild(document.createElement("br"))}}function darRespuestaHtml(a){var b=document.createElement("p"),c=document.createTextNode(a);b.appendChild(c),document.getElementById("resultadosDiv").appendChild(b)}function darExplicacion(a){var b=document.createElement("p"),c=document.createTextNode(a);b.appendChild(c),document.getElementById("resultadosDiv").appendChild(b)}function presentarNota(){document.getElementById("notaFinal").style.display="block",document.getElementById("notaza").innerHTML="Nota: "+nota.toFixed(2)+" puntos sobre 10"}function inicializar(){document.getElementById("resultadosDiv").innerHTML="",nota=0}function comprobar(){var a=formElement;for(numPreg=0;numPreg<2;numPreg++)if(0==a.elements[numPreg].selectedIndex)return a.elements[numPreg].focus(),alert("Por favor, selecciona una opcion en la pregunta "+(numPreg+1)),!1;for(numPreg=2;numPreg<4;numPreg++){var b=!1;for(i=1;i<a.elements[numPreg].length;i++){var c=a.elements[numPreg].options[i];c.selected&&(b=!0)}if(!b)return a.elements[numPreg].focus(),alert("Por favor, selecciona al menos una opcion en la pregunta "+(numPreg+1)),!1}for(numPreg=4;numPreg<6;numPreg++)if(""==a.elements[numPreg].value)return a.elements[numPreg].focus(),alert("Por favor, responde la pregunta "+(numPreg+1)),!1;for(numPreg=6;numPreg<8;numPreg++){var d;if(d=6==numPreg?a.seis:a.siete,""==d.value)return d[0].focus(),alert("Por favor, responde la pregunta "+(numPreg+1)),!1}for(numPreg=8;numPreg<10;numPreg++){var f,e=!1;for(f=8==numPreg?a.ocho:a.nueve,i=0;i<f.length;i++)f[i].checked&&(e=!0);if(!e)return f[0].focus(),alert("Por favor, selecciona al menos una opcion en la pregunta "+(numPreg+1)),!1}return!0}function actualizarTime(){var a;min>=0&&seg>=0?(a=seg<10?"0"+seg:seg,document.getElementById("timer").innerHTML=min+" : "+a,seg--,seg<0&&(min--,seg=59)):(document.getElementById("timer").innerHTML="0 : 00",alerta||(alert("Se acabó el tiempo. Date prisa en enviar tus respuestas."),alerta=!0))}var formElement=null,respuestaSelect=[],respuestasMultiple=[],respuestaText=[],respuestaRadio=[],respuestasCheckbox=[],nota=0,min=10,seg=0,alerta=!1;window.onload=function(){formElement=document.getElementById("myform"),formElement.onsubmit=function(){return inicializar(),comprobar()&&confirm("¿Quieres corregir el examen?")&&(corregirSelect(),corregirMultiple(),corregirText(),corregirRadio(),corregirCheckbox(),presentarNota(),document.getElementById("cronometro").style.display="none",alerta=!0,window.location.hash="#notaFinal"),!1};var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&gestionarXml(this)},a.open("GET","xml/preguntas.xml",!0),a.send(),setInterval(actualizarTime,1e3)};
